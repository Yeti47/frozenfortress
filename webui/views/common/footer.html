{{define "footer"}}
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="copyright">
                Â© 2025 Yetibyte
            </div>
            <div class="version">
                Version {{.Version}}
            </div>
        </div>
    </footer>

    <script>
        function toggleUserMenu() {
            const menu = document.getElementById('user-menu');
            menu.classList.toggle('show');
        }

        function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                // Clear navigation history for security
                clearNavigationHistory();
                window.location.href = '/logout';
            }
        }

        function clearNavigationHistory() {
            try {
                // Clear browser history by replacing current state and going back to login
                if ('history' in window && 'replaceState' in window.history) {
                    // Replace all history entries with the login page
                    window.history.replaceState(null, '', '/login');
                    
                    // Clear session storage and local storage for additional security
                    if (typeof(Storage) !== "undefined") {
                        sessionStorage.clear();
                        localStorage.clear();
                    }
                    
                    // Clear any cached data if possible
                    if ('caches' in window) {
                        caches.keys().then(function(names) {
                            for (let name of names) {
                                caches.delete(name);
                            }
                        });
                    }
                }
            } catch (e) {
                console.log('History clearing not fully supported in this browser');
            }
        }

        function performSearch(event) {
            event.preventDefault();
            const searchTerm = event.target.searchTerm.value.trim();
            const urlParams = new URLSearchParams(window.location.search);
            
            if (searchTerm) {
                urlParams.set('searchTerm', searchTerm);
            } else {
                urlParams.delete('searchTerm');
            }
            urlParams.set('page', '1'); // Reset to first page when searching
            
            // Remove success message parameters when searching
            urlParams.delete('created');
            urlParams.delete('updated');
            urlParams.delete('deleted');
            
            // Stay on current page if we're on secrets page, otherwise go to root
            if (window.location.pathname === '/' || window.location.pathname === '/secrets') {
                window.location.search = urlParams.toString();
            } else {
                window.location.href = `/?${urlParams.toString()}`;
            }
        }

        function clearSearch() {
            const searchInput = document.getElementById('searchInput');
            const clearButton = document.getElementById('searchClearButton');
            
            // Clear the input
            searchInput.value = '';
            
            // Hide the clear button
            clearButton.classList.remove('show');
            
            // Remove search term from URL and redirect
            const urlParams = new URLSearchParams(window.location.search);
            urlParams.delete('searchTerm');
            urlParams.set('page', '1'); // Reset to first page
            
            // Remove success message parameters
            urlParams.delete('created');
            urlParams.delete('updated');
            urlParams.delete('deleted');
            
            // Stay on current page if we're on secrets page, otherwise go to root
            if (window.location.pathname === '/' || window.location.pathname === '/secrets') {
                window.location.search = urlParams.toString();
            } else {
                window.location.href = `/?${urlParams.toString()}`;
            }
        }

        function toggleClearButton() {
            const searchInput = document.getElementById('searchInput');
            const clearButton = document.getElementById('searchClearButton');
            
            if (searchInput.value.trim()) {
                clearButton.classList.add('show');
            } else {
                clearButton.classList.remove('show');
            }
        }

        // Initialize clear button visibility on page load
        document.addEventListener('DOMContentLoaded', function() {
            toggleClearButton();
        });

        // Close user menu when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('user-menu');
            const button = document.querySelector('.user-menu-button');
            
            if (!menu.contains(event.target) && !button.contains(event.target)) {
                menu.classList.remove('show');
            }
        });

        // Handle header navigation
        document.querySelector('.header-left').style.textDecoration = 'none';
    </script>
</body>
</html>
{{end}}