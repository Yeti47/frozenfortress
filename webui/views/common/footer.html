{{define "footer"}}
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="copyright">
                Â© 2025 Frozen Fortress. All rights reserved.
            </div>
            <div class="version">
                Version {{.Version}}
            </div>
        </div>
    </footer>

    <script>
        function toggleUserMenu() {
            const menu = document.getElementById('user-menu');
            menu.classList.toggle('show');
        }

        function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                // Clear navigation history for security
                clearNavigationHistory();
                window.location.href = '/logout';
            }
        }

        function clearNavigationHistory() {
            try {
                // Clear browser history by replacing current state and going back to login
                if ('history' in window && 'replaceState' in window.history) {
                    // Replace all history entries with the login page
                    window.history.replaceState(null, '', '/login');
                    
                    // Clear session storage and local storage for additional security
                    if (typeof(Storage) !== "undefined") {
                        sessionStorage.clear();
                        localStorage.clear();
                    }
                    
                    // Clear any cached data if possible
                    if ('caches' in window) {
                        caches.keys().then(function(names) {
                            for (let name of names) {
                                caches.delete(name);
                            }
                        });
                    }
                }
            } catch (e) {
                console.log('History clearing not fully supported in this browser');
            }
        }

        function performSearch(event) {
            event.preventDefault();
            const searchTerm = event.target.searchTerm.value.trim();
            if (searchTerm) {
                window.location.href = `/?searchTerm=${encodeURIComponent(searchTerm)}`;
            }
        }

        // Close user menu when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('user-menu');
            const button = document.querySelector('.user-menu-button');
            
            if (!menu.contains(event.target) && !button.contains(event.target)) {
                menu.classList.remove('show');
            }
        });

        // Handle header navigation
        document.querySelector('.header-left').style.textDecoration = 'none';
    </script>
</body>
</html>
{{end}}